!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SupportChat=e():t.SupportChat=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="https://npm-assets.fiverrcdn.com/assets/@fiverr-private/support_chat/",n(n.s="tjUo")}({"/9aa":function(t,e,n){var r=n("NykK"),o=n("ExA7");t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==r(t)}},"6BTq":function(t,e,n){"use strict";(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return o}));var o="object"===("undefined"==typeof window?"undefined":r(window))&&window.window===window&&window||"object"===(void 0===t?"undefined":r(t))&&t.global===t&&t||"object"===("undefined"==typeof self?"undefined":r(self))&&self.self===self&&self}).call(this,n("yLpj"))},AP2z:function(t,e,n){var r=n("nmnc"),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,c=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[c]=n:delete t[c]),o}},DzJC:function(t,e,n){var r=n("sEfC"),o=n("GoyQ");t.exports=function(t,e,n){var i=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(t,e,{leading:i,maxWait:e,trailing:a})}},ExA7:function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},GoyQ:function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},KfNM:function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},Kz5y:function(t,e,n){var r=n("WFqU"),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},NykK:function(t,e,n){var r=n("nmnc"),o=n("AP2z"),i=n("KfNM"),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},QIyF:function(t,e,n){var r=n("Kz5y");t.exports=function(){return r.Date.now()}},WFqU:function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("yLpj"))},nmnc:function(t,e,n){var r=n("Kz5y").Symbol;t.exports=r},sEfC:function(t,e,n){var r=n("GoyQ"),o=n("QIyF"),i=n("tLB3"),a=Math.max,c=Math.min;t.exports=function(t,e,n){var u,s,f,d,l,p,w=0,y=!1,h=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(e){var n=u,r=s;return u=s=void 0,w=e,d=t.apply(r,n)}function v(t){return w=t,l=setTimeout(O,e),y?b(t):d}function g(t){var n=t-p;return void 0===p||n>=e||n<0||h&&t-w>=f}function O(){var t=o();if(g(t))return E(t);l=setTimeout(O,function(t){var n=e-(t-p);return h?c(n,f-(t-w)):n}(t))}function E(t){return l=void 0,m&&u?b(t):(u=s=void 0,d)}function j(){var t=o(),n=g(t);if(u=arguments,s=this,p=t,n){if(void 0===l)return v(p);if(h)return clearTimeout(l),l=setTimeout(O,e),b(p)}return void 0===l&&(l=setTimeout(O,e)),d}return e=i(e)||0,r(n)&&(y=!!n.leading,f=(h="maxWait"in n)?a(i(n.maxWait)||0,e):f,m="trailing"in n?!!n.trailing:m),j.cancel=function(){void 0!==l&&clearTimeout(l),w=0,u=p=s=l=void 0},j.flush=function(){return void 0===l?d:E(o())},j}},tLB3:function(t,e,n){var r=n("GoyQ"),o=n("/9aa"),i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=c.test(t);return n||u.test(t)?s(t.slice(2),n?2:8):a.test(t)?NaN:+t}},tjUo:function(t,e,n){"use strict";n.r(e);var r="CACHED",o="LIVE",i={OPEN:"OPEN",SHOWN:"SHOWN",HIDDEN:"HIDDEN",EMPTY:"EMPTY"},a="supportchat:init",c="supportchat:initialized",u="SUPPORT.CHAT.STATE",s=n("DzJC"),f=n.n(s),d=function(t){return{customEventName:"chat_is_closed",properties:{chat_id:t}}},l=function(t,e){return{customEventName:"chat_account_status_changed",properties:{status:t,chat_id:e}}},p=function(t){if(!window.appboy)throw new Error("No Braze appboy");if(!t.customEventName)throw new Error("No payload custom event name");window.appboy.logCustomEvent(t.customEventName,t.properties)},w=function(){var t=document.querySelector("body");return!(!t||!t.getAttribute)&&"true"===t.getAttribute("data-logged-in")};function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t){switch(t){case i.OPEN:window.zE("webWidget","show"),setTimeout((function(){window.zE("webWidget","open")}),500);break;case i.SHOWN:window.zE("webWidget","show");break;case i.HIDDEN:default:window.zE("webWidget","hide")}}function v(t){var e=t.tags,n=t.department;window.zESettings={launcher:{label:{"*":"Business Chat"},chatLabel:{"*":"Business Chat"}},webWidget:{zIndex:9999999999,offset:{horizontal:0,vertical:"2px"},chat:{tags:e,departments:{enabled:[n],select:n}},authenticate:{chat:{jwtFn:function(t){window.axios.get("/zendesk/chat_authentication").then((function(t){return t.data})).then((function(e){console.log("Successfuly authenticated into Zendesk chat"),t(e.jwt)}))}}}}}}function g(t){var e,n,r,o;document.getElementById("ze-snippet")&&(e=document.getElementById("launcher"),n=document.getElementById("webWidget"),r=document.querySelector('[data-product="web_widget"]'),o=document.getElementById("ze-snippet"),e&&e.parentElement.removeChild(e),n&&n.parentElement.removeChild(n),r&&r.parentElement.removeChild(r),o.parentElement.removeChild(o),delete window.$zopim,delete window.zEmbed,delete window.zE,delete window.zEACLoaded,delete window.zEWebpackACJsonp);var i=document.createElement("script");i.onload=t,i.type="application/javascript",i.id="ze-snippet",i.src="https://static.zdassets.com/ekr/snippet.js?key=".concat("dbd69753-3b8a-468d-b704-8a1ed2887899","&cors=1");var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(i,a)}function O(t){var e,n=t.tags,r=t.department,o=t.state,a=t.chat_id;!function(t){switch(t){case i.OPEN:case i.SHOWN:return window.zE("webWidget","show");default:window.zE("webWidget","hide")}}(o),function t(){var e=document.getElementById("launcher");if(!e)return setTimeout((function(){10!==t.retries&&(t.retries=(t.retries||0)+1,t())}),1e3);setTimeout((function(){return E(e)}),500),document.onscroll=f()((function(){return E(e)}),50)}(),(e=document.createElement("style")).innerHTML="\n        #launcher {\n            margin: 10px !important;\n            z-index: 3 !important;\n        }\n    ",document.head.appendChild(e),function t(){var e=document.getElementById("launcher");if(!e)return setTimeout((function(){10!==t.retries?(t.retries=(t.retries||0)+1,t()):console.error("Did not find launcher")}),1e3);var n=e.contentDocument.createElement("style"),r=e.contentDocument.querySelector("button");if(!r)return setTimeout((function(){10!==t.retriesForButton?(t.retriesForButton=(t.retriesForButton||0)+1,t()):console.error("Did not find button in launcher")}),1e3);n.innerHTML="\n        button {\n            padding: 1rem !important;\n        }\n        button span:nth-child(1) {\n            padding-right: 0 !important;\n        }\n        button span.u-inlineBlock, button span {\n            display: none !important;\n        }\n    ",e.contentDocument.head.appendChild(n),r.innerHTML='\n    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <g clip-path="url(#clip0)">\n            <path d="M1.59978 0.599609H18.3998C19.0622 0.599609 19.5998 1.13721 19.5998 1.79961V14.9996C19.5998 15.662 19.0622 16.1996 18.3998 16.1996H11.1998L5.19978 19.7996V16.1996H1.59978C0.93738 16.1996 0.39978 15.662 0.39978 14.9996V1.79961C0.39978 1.13721 0.93738 0.599609 1.59978 0.599609Z"\n                  fill="white"/>\n        </g>\n        <path d="M6.75011 13.8H9.48354V8.3324H12.0832V13.8H14.8V6.31063H9.48354V5.8465C9.48354 5.3373 9.88385 5.0226 10.5173 5.0226H12.0841V3H10.0668C8.08292 3 6.75011 4.09352 6.75011 5.69625V6.31063H5.19995V8.33323H6.75011V13.8Z"\n              fill="#1E1692" style="fill: #1E1692;"/>\n        <defs>\n            <clipPath id="clip0">\n                <rect width="19.2" height="19.2" fill="white" transform="translate(0.39978 0.599609)"/>\n            </clipPath>\n        </defs>\n    </svg>\n'}(),setInterval((function(){if(window.zE("webWidget:get","chat:isChatting")){var t=z();if(function(t){if(!t||!t.createdAt)return!0;var e=new Date(t.createdAt),n=new Date(e.getTime()+864e5-9e5);return new Date>n}(t)){var e=new Date(Date.now()-864e5+9e5);D(h(h({},t),{},{createdAt:e}))}}}),6e4),window.zE("webWidget:on","chat:departmentStatus",(function(t){console.info("Department ".concat(t.name,", ").concat(t.id," is ").concat(t.status)),t.name===r&&"online"===t.status&&(window.zE("webWidget","chat:addTags",n),b(o))})),window.zE("webWidget:on","chat:connected",(function(){console.log("Successfully connected to Zendesk Chat!")})),window.zE("webWidget:on","chat:end",(function(){!function(){var t=z(),e=new Date(Date.now()-864e5+6e4);D(h(h({},t),{},{state:i.SHOWN,createdAt:e}))}(),p(d(a))})),window.zE("webWidget:on","close",(function(){D(h(h({},z()),{},{state:i.SHOWN}))})),window.zE("webWidget:on","chat:status",(function(t){return function(t,e){return p(l(t,e))}(t,a)})),window.zE("webWidget:on","chat:unreadMessages",(function(){window.zE("webWidget","open")})),window.dispatchEvent(new CustomEvent(c))}var E=function(t){window.innerHeight+window.scrollY>document.body.clientHeight-20?t.classList.add("invisible-element"):t.classList.remove("invisible-element")};function j(t){t&&"EMPTY"!==t.state&&t.chat_id&&t.department&&(v(t),g((function(){return O(t)})))}function S(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z(){var t=window.localStorage.getItem(u);if(t)try{return JSON.parse(t)}catch(t){window.localStorage.removeItem(u)}}function D(t){var e=JSON.stringify(_(_({},t),{},{createdAt:t.createdAt||new Date}));return window.localStorage.setItem(u,e)}function T(){return window.axios.get("/zendesk/chat/state").then((function(t){return t.data})).then((function(t){if(t){if(void 0!==t.success&&!1===t.success)return;var e=_(_({},t),{},{tags:[].concat(S(t.tags||[]),["user_type-".concat(window.dataLayer&&window.dataLayer[0].user_type)])});return D(e),e}})).catch((function(t){throw t}))}function C(){if(!window.axios)return setTimeout((function(){10!==C.retries&&(C.retries=(C.retries||0)+1,C())}),500);var t=z(),e=function(t){if(!t)return!0;var e=new Date(t),n=new Date(e.getTime()+864e5);return new Date>n}(t&&t.createdAt),n="true"===new URLSearchParams(window.location.search).get("openSupportChat");return e?T().then((function(t){if(t)return j(_(_({},t),{},{state:n?i.OPEN:t.state}))})):j(_(_({},t),{},{state:n?i.OPEN:t.state}))}var N=function(t){if(w())switch(t){case o:return"Live flow TBD";case r:default:return C()}else window.localStorage.removeItem(u)},W=n("6BTq");function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=Symbol(),k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this[I]=new Map}var e,n,r;return e=t,(n=[{key:"on",value:function(t,e){var n=this[I].get(t);n||(this[I].set(t,new Set),n=this[I].get(t)),n.add(e)}},{key:"once",value:function(t,e){var n=this,r=function r(){n.off(t,r),e.apply(void 0,arguments)};this.on(t,r)}},{key:"one",value:function(t,e){this.has(t)||this.on(t,e)}},{key:"has",value:function(t){return this[I].has(t)}},{key:"off",value:function(t,e){if(this[I].has(t))if(void 0!==e){var n=this[I].get(t);n.delete(e),0===n.size&&this[I].delete(t)}else this[I].delete(t)}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=this[I].get(t);o&&o.forEach((function(t){t.apply(void 0,n)}))}},{key:"deferred",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Promise.resolve().then((function(){e.emit.apply(e,[t].concat(r))}))}}])&&H(e.prototype,n),r&&H(e,r),t}(),L=Symbol.for("globalEventBus"),B=W.a[L]=W.a[L]||new k,M=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];B.deferred("OBS::BIG_QUERY",{events:e})};function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){F(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e="reason_";return t.filter((function(t){return-1!==t.indexOf(e)})).reduce((function(t,n){return n.slice(e.length)}),"")};function K(t){return function(t){if(Array.isArray(t))return Q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $(t){if(w()){var e=z();!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error('"detail" payload is not defined for event. Please, fire event like new CustomEvent("supportchat:init", { detail: { ...your properties } })');if(!t.chat_id&&!e.chat_id)throw new Error('Missing param "chat_id" needed to initiate support chat');if(!t.department&&!e.department)throw new Error('Missing param "department" needed to initiate support chat');if(!t.tags)throw new Error('Missing param "tags" needed to initiate support chat');var n=t.state||e.state;if(!n)throw new Error('Missing param "state" needed to initiate support chat');if(n&&!Object.values(i).find((function(t){return t===n})))throw new Error('"state" property has to have one of these values: '.concat(Object.values(i).toString()));if(t.createdAt&&!(t.createdAt instanceof Date))throw new Error('"createdAt" param has to be of type Date')}(t.detail,e);var n=t.detail,r=n.chat_id,o=n.department,a=n.tags,c=n.state,s=n.createdAt,f=[].concat(K(a),["user_type-".concat(window.dataLayer&&window.dataLayer[0].user_type)]),d={chat_id:r,department:o,tags:f,state:c,createdAt:s};!function(t){var e=U(U({},{group:"user_actions",platform:"web",user:{id:window.dataLayer&&window.dataLayer.length&&window.dataLayer[0]&&window.dataLayer[0].user_id},feature:{name:"support_chat"},reason:"support_chat_to_vibs",sub_group:"website_actions",action:{type:"click"},domain:{name:"buyers"},publisher:{domain:"buyers",sub_domain:"grizzlies"}}),{},{type:"chat_triggered",reason:q(t)});M(e)}(f),j(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{chat_id:t.chat_id||e.chat_id,department:t.department||e.department,tags:t.tags?[].concat(K(e.tags?e.tags:[]),K(t.tags)):e.tags,state:t.state||e.state,createdAt:t.createdAt||e.createdAt}}(d,e))}else window.localStorage.removeItem(u)}window.addEventListener(a,$),N(window.SUPPORT_CHAT_TYPE)},yLpj:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n}})}));